<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>基本使用</title>
    <link crossorigin='anonymous' href="https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css"
        rel="stylesheet">
</head>

<body>
    <div class="container">
        <h2 class="page-header">Promise ajax</h2>
        <button class="btn btn-primary" id="btn">AJAXXXX</button>
    </div>
    <div id="result">

    </div>
    <script>
        const btn = document.getElementById("btn");

        btn.addEventListener("click", () => {

            // const xhr = new XMLHttpRequest();

            // xhr.open("GET", "https://randomuser.me/api")

            // xhr.send();

            // xhr.onreadystatechange = () => {
            //     if (xhr.readyState === 4) {
            //         if (xhr.status < 300 && xhr.status >= 200) {
            //             console.log(xhr.response)
            //         }
            //         else {
            //             console.log(xhr.response)
            //         }
            //     }
            // }


            const xhr = new XMLHttpRequest();
            xhr.open("GET", "https://randomuser.me/api")

            xhr.send();

            const promise_ = new Promise((resolve, reject) => {
                xhr.onreadystatechange = () => {
                    if (xhr.readyState === 4) {
                        if (xhr.status < 300 && xhr.status >= 200) {
                            resolve(xhr.response)
                        }
                        else {
                            reject(xhr.response)
                        }
                    }
                }
            })
            promise_.then((response) => {
                console.log(response)
            }, (error) => {
                console.warn(error)
            })

        });

    </script>

</body>


</html>